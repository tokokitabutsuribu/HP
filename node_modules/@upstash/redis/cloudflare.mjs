import{a as n,b as o,c as i}from"./chunk-KBK5EDMP.mjs";var a=class S extends o{constructor(e,r){(e.url.startsWith(" ")||e.url.endsWith(" ")||/\r|\n/.test(e.url))&&console.warn("The redis url contains whitespace or newline, which can cause errors!"),(e.token.startsWith(" ")||e.token.endsWith(" ")||/\r|\n/.test(e.token))&&console.warn("The redis token contains whitespace or newline, which can cause errors!");let t=new n({retry:e.retry,baseUrl:e.url,headers:{authorization:`Bearer ${e.token}`},responseEncoding:e.responseEncoding});super(t,{enableTelemetry:!r?.UPSTASH_DISABLE_TELEMETRY,automaticDeserialization:e.automaticDeserialization}),this.addTelemetry({platform:"cloudflare",sdk:`@upstash/redis@${i}`})}static fromEnv(e,r){let t=e?.UPSTASH_REDIS_REST_URL??UPSTASH_REDIS_REST_URL,s=e?.UPSTASH_REDIS_REST_TOKEN??UPSTASH_REDIS_REST_TOKEN;if(!t)throw new Error("Unable to find environment variable: `UPSTASH_REDIS_REST_URL`. Please add it via `wrangler secret put UPSTASH_REDIS_REST_URL`");if(!s)throw new Error("Unable to find environment variable: `UPSTASH_REDIS_REST_TOKEN`. Please add it via `wrangler secret put UPSTASH_REDIS_REST_TOKEN`");return new S({...r,url:t,token:s},e)}};export{a as Redis};
